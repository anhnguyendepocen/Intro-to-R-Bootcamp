{
    "collab_server" : "",
    "contents" : "# Session 7: Quick plotting with base R\n\n\n####################\n# What to Remember #\n####################\n# Notes: Graphs are created iteratively - run the following code one line at a time\nattach(mtcars)\nplot(wt, mpg) \nabline(lm(mpg~wt))\ntitle(\"Regression of MPG on Weight\")\n\n\n\n#############\n# Data Used #\n#############\n# Notes: \n\nlibrary(readxl)\nfacebook <- read.delim(\"data/facebook.tsv\")\nreddit <- read.csv(\"data/reddit.csv\")\nrace <- read.csv(\"data/race-comparison.csv\")\nsupermarket <- read_excel(\"data/Supermarket Transactions.xlsx\", sheet = \"Data\")\n\n\n###############\n# Strip Chart #\n###############\n\n# default\nstripchart(mtcars$mpg)\n\n# change the type the point style w/pch\nstripchart(facebook$tenure, pch = 16)   \n\n\n\n#############\n# Histogram #\n#############\n\n# default\nhist(facebook$tenure)     \n\n# add different parameters to change breaks, color, title, etc.\nhist(facebook$tenure, breaks = 100, col = \"grey\", \n     main = \"Facebook User Tenure\", xlab = \"Tenure (Days)\")\n\n\n# you can also compare the histogram to a normal curve to see how it deviates\n# there's a lot going on here so this is just for your reference\n\n## remove missing values\nx <- na.omit(facebook$tenure)\n\n## create the histogram\nh <- hist(x, breaks = 100, col = \"grey\", main = \"Facebook User Tenure\", \n          xlab = \"Tenure (Days)\")\n\n## create normal curve data\nxfit <- seq(min(x), max(x), length = 100) \nyfit <- dnorm(xfit, mean = mean(x), sd = sd(x)) \nyfit <- yfit * diff(h$mids[1:2]) * length(x)\n\n## add normal curve to the histogram\nlines(xfit, yfit, col = \"red\", lwd = 2)\n\n\n\n################\n# Density Plot #\n################\n\n# first you need to calculate the density (be sure to remove missing data with\n# na.rm = TRUE)\nd <- density(facebook$tenure, na.rm = TRUE)\n\n# you can now use plot() to plot the density data\nplot(d)\n\n# you can fill area under the curve with polygon()\npolygon(d, col = \"red\", border = \"blue\")\n\n\n\n############\n# Box Plot #\n############\n\n# default\nboxplot(facebook$tenure)\n\n# change to horizontal\nboxplot(facebook$tenure, horizontal = TRUE)\n\n# add notches\nboxplot(facebook$tenure, horizontal = TRUE, notch = TRUE, col = \"grey40\")\nboxplot(mtcars$mpg, horizontal = TRUE, notch = TRUE, col = \"grey40\") # better example\n\n\n# you can also add mean value points but you can only do it to vertical boxplots\nboxplot(mtcars$mpg, notch = TRUE)\npoints(mean(mtcars$mpg), pch=18, col = \"red\")\n\n\n\n#############\n# Your Turn #\n#############\n# Using the facebook data visually assess the continous variables. \n# What insights do you find?\n\n\n\n\n\n\n\n\n#############\n# Bar Chart #\n#############\n# Notes:\n\n# bar charts plot the count of each category so you first need to calculate\n# the counts\ntable(reddit$dog.cat)\n\n# embed this in the barplot() function\nbarplot(table(reddit$dog.cat))\n\n# include and/or change features such as title, horizontal alignment, category\n# names, color\npets <- table(reddit$dog.cat)\npar(las = 1)\nbarplot(pets, main = \"Reddit User Animal Preferences\", horiz = TRUE, \n        names.arg = c(\"Cats\", \"Dogs\", \"Turtles\"), col = 'cyan')\n\n# plot this data\nlibrary(dplyr)\n\nstate <- reddit %>%\n        group_by(state) %>%\n        tally() %>%\n        arrange(n) %>%\n        filter(state != \"\")\n\npar(mar = c(3,8,1,1), las = 1)\nbarplot(state$n, names.arg = state$state, horiz = TRUE)\n\n\n############\n# Dot Plot #\n############\n# Notes:\n\n# now plot the same state data with a dot plot\ndotchart(state$n,labels = state$state, cex = .7)\n\n\n\n\n\n\n#############\n# Your Turn #\n#############\n# Using the Reddit data... \n\n# 1) assess the frequency of education levels\n\n\n\n# 2) assess how the different cheeses rank with Reddit users. What do you find?\n\n\n\n\n\n\n################\n# Scatter Plot #\n################\n# Notes:\n\n# default (add some color with col = ? or change the point style with pch = ?)\nplot(x = race$White_unemployment, y = race$Black_unemployment)\nplot(x = race$Black_unemployment, y = race$black_college)\n\n# you can fit lines to the scatter plot to assess its linearity; note that you \n# need to use \"~\" rather than \"x =\" and \"y =\"\nplot(White_unemployment ~ Black_unemployment, data = race)\nabline()\nlines()\n\n# quickly assess multiple scatter plots with pairs()\npairs(race)\npairs(race[, c(\"White_unemployment\", \"Black_unemployment\", \n               \"white_college\", \"black_college\")])\n\n\n###############\n# Line Charts #\n###############\n# Notes:\n\n# apply different \"type = ?\" for line, step, and line-point charts\n## turn this default to a line chart using \"type = ?\" \nplot(x = race$Year, y = race$black_college)\n\n## how about a step chart\nplot(x = race$Year, y = race$black_college)\n\n## and a line chart with dots\nplot(x = race$Year, y = race$black_college)\n\n\n# you can plot multiple lines on a chart \nplot(x = race$Year, y = race$Black_hs, type = \"l\", ylim = c(0, max(race$Black_hs)))\nlines(x = race$Year, y = race$black_college, col = \"red\")\nlines(x = race$Year, y = race$Black_unemployment, col = \"blue\", lty = 2)\n\n# and you probably want to add a legend\nlegend(\"topleft\", legend = c(\"HS Rate\", \"College Rate\", \"Unemployment\"), \n       col = c(\"black\", \"red\", \"blue\"), lty = c(1, 1, 2))\n\n\n\n#####################\n# Box Plots...again #\n#####################\n# Notes:\n\n# turn this single variable boxplot into two box plots comparing gender\nboxplot(supermarket$Revenue)\nboxplot()\n\n# add a third variable for marital status\nboxplot()\n\n\n\n#############\n# Your Turn #\n#############\n# Using the supermarket data analyze revenue by date, homeownership, city, product \n# family, etc.  Don't forget you can summarize the data using dplyr like you\n# learned about earlier...example:\n\n## this sums total sales by data\nsupermarket %>%\n        group_by(`Purchase Date`) %>%\n        summarise(Revenue = sum(Revenue, na.rm = TRUE))\n\n\n\n\n\n\n\n######################\n# Bar Charts...again #\n######################\n# Notes:\n\n# we can get frequency tables across two groups\ncounts <- table(supermarket$`Marital Status`, supermarket$Children)\n\n# you can plot these results either stacked or side-by-side with barplot()\nbarplot(counts, col = c(\"darkblue\", \"red\"), legend = c(\"Married\", \"Single\"))\nbarplot(counts, col = c(\"darkblue\", \"red\"), legend = c(\"Married\", \"Single\"), beside = TRUE)\n\n# you can turn these counts into proportions\nproportions <- prop.table(counts)\n\n# now plot these results in a similar manner as above\nbarplot()\n\n\n\n#############\n# Your Turn #\n#############\n# Using the reddit data compare counts of...\n# 1) product family by homeownership\n\n\n# 2) annual income by homeownership\n\n\n# 3) country by gender\n\n\n# 4) etc.\n\n\n\n\n\n",
    "created" : 1469763026010.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "395188031",
    "id" : "EA772956",
    "lastKnownWriteTime" : 1469763854,
    "last_content_update" : 1469763854049,
    "path" : "~/Dropbox/Academia/University of Cincinnati/Intro to R Bootcamp/Files - teacher/7-quickplots-teacher.R",
    "project_path" : "Files - teacher/7-quickplots-teacher.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}